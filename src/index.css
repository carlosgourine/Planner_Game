@import "tailwindcss";

@layer base {
  body {
    font-family: 'Press Start 2P', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
  }
}

@layer utilities {
  .glass-panel {
    @apply bg-black/40 backdrop-blur-md border border-white/10 shadow-xl;
  }

  .text-shadow {
    text-shadow: 2px 2px 0px rgba(0, 0, 0, 0.8);
  }

  .text-shadow-lg {
    text-shadow: 4px 4px 0px rgba(0, 0, 0, 1);
  }

  .bg-urban-tundra {
    background: linear-gradient(180deg, #020617 0%, #1e1b4b 40%, #172554 100%);
    position: relative;
  }

  /* Cyberpunk Grid Floor */
  .bg-grid-floor {
    background-image:
      linear-gradient(to right, rgba(0, 255, 255, 0.1) 1px, transparent 1px),
      linear-gradient(to bottom, rgba(0, 255, 255, 0.1) 1px, transparent 1px);
    background-size: 40px 40px;
    transform: perspective(500px) rotateX(60deg);
    transform-origin: bottom;
  }
}

/* Animations */

/* --- SNAPPY IMPACT SHAKE --- */
@keyframes shake-impact {
  0% {
    transform: translate(0, 0);
  }

  10% {
    transform: translate(-4px, -2px);
  }

  20% {
    transform: translate(4px, 2px);
  }

  30% {
    transform: translate(-4px, 2px);
  }

  40% {
    transform: translate(4px, -2px);
  }

  50% {
    transform: translate(-4px, -2px);
  }

  60% {
    transform: translate(4px, 2px);
  }

  70% {
    transform: translate(-4px, 2px);
  }

  80% {
    transform: translate(4px, -2px);
  }

  90% {
    transform: translate(-2px, -1px);
  }

  100% {
    transform: translate(0, 0);
  }
}

.animate-shake {
  animation: shake-impact 0.2s ease-in-out;
}

@keyframes glitch {
  0% {
    transform: translate(0);
  }

  20% {
    transform: translate(-2px, 2px);
  }

  40% {
    transform: translate(-2px, -2px);
  }

  60% {
    transform: translate(2px, 2px);
  }

  80% {
    transform: translate(2px, -2px);
  }

  100% {
    transform: translate(0);
  }
}

/* =========================================
   PIXEL ART SNAP ENGINE
   ========================================= */

/* Base sprite box */
.pixel-avatar {
  background-repeat: no-repeat;
  background-position: 0% 100%;
  image-rendering: pixelated;
  image-rendering: crisp-edges;
}

/* Avoid edge flicker on some sheets */
@keyframes play-sprite {
  from {
    background-position: 0% 100%;
  }

  to {
    background-position: 99.999% 100%;
  }
}

/* --- COWBOY (7 frames) --- */
.animate-cowboy-idle {
  background-image: url('/cowboy_idle_sheet.png');
  background-size: 700% 100%;
  animation: play-sprite 2.2s steps(6) infinite;
}

/* --- COWBOY ATTACK (6 frames) --- */
.animate-cowboy-attack {
  background-image: url('/cowboy_attack_sheet.png');
  background-size: 600% 100%;
  animation: play-sprite 2.6s steps(5) forwards;
}

/* --- WOLF (7 frames) --- */
.animate-wolf-idle {
  background-image: url('/wolf_idle_sheet.png');
  background-size: 700% 100%;
  animation: play-sprite 2.2s steps(6) infinite;
}

/* --- WOLF HURT (4 frames) --- */
.animate-wolf-hurt {
  background-image: url('/wolf_hurt_sheet.png');
  background-size: 400% 100%;
  animation: play-sprite 1.6s steps(3) forwards;
  filter: brightness(1.5) sepia(1) hue-rotate(-50deg) saturate(5);
}