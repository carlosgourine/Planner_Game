@import "tailwindcss";

@layer base {
  body {
    font-family: 'Press Start 2P', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
  }
}

@layer utilities {
  .glass-panel {
    @apply bg-black/40 backdrop-blur-md border border-white/10 shadow-xl;
  }

  .text-shadow {
    text-shadow: 2px 2px 0px rgba(0, 0, 0, 0.8);
  }

  .text-shadow-lg {
    text-shadow: 4px 4px 0px rgba(0, 0, 0, 1);
  }

  .bg-urban-tundra {
    background: linear-gradient(180deg, #020617 0%, #1e1b4b 40%, #172554 100%);
    position: relative;
  }

  /* Cyberpunk Grid Floor */
  .bg-grid-floor {
    background-image:
      linear-gradient(to right, rgba(0, 255, 255, 0.1) 1px, transparent 1px),
      linear-gradient(to bottom, rgba(0, 255, 255, 0.1) 1px, transparent 1px);
    background-size: 40px 40px;
    transform: perspective(500px) rotateX(60deg);
    transform-origin: bottom;
  }
}

/* Animations */

/* --- SNAPPY IMPACT SHAKE --- */
@keyframes shake-impact {
  0% {
    transform: translate(0, 0);
  }

  10% {
    transform: translate(-4px, -2px);
  }

  20% {
    transform: translate(4px, 2px);
  }

  30% {
    transform: translate(-4px, 2px);
  }

  40% {
    transform: translate(4px, -2px);
  }

  50% {
    transform: translate(-4px, -2px);
  }

  60% {
    transform: translate(4px, 2px);
  }

  70% {
    transform: translate(-4px, 2px);
  }

  80% {
    transform: translate(4px, -2px);
  }

  90% {
    transform: translate(-2px, -1px);
  }

  100% {
    transform: translate(0, 0);
  }
}

.animate-shake {
  animation: shake-impact 0.2s ease-in-out;
}

@keyframes glitch {
  0% {
    transform: translate(0);
  }

  20% {
    transform: translate(-2px, 2px);
  }

  40% {
    transform: translate(-2px, -2px);
  }

  60% {
    transform: translate(2px, 2px);
  }

  80% {
    transform: translate(2px, -2px);
  }

  100% {
    transform: translate(0);
  }
}

/* =========================================
   PIXEL ART SNAP ENGINE
   ========================================= */

/* Base sprite box */
.pixel-avatar {
  display: block;
  background-repeat: no-repeat;

  /* Keep Y fixed, animate X only (more reliable than shorthand) */
  background-position-x: 0%;
  background-position-y: 100%;

  image-rendering: pixelated;
  image-rendering: crisp-edges;

  will-change: background-position;
}

/* Flip wrapper for wolf (never mix with other transforms) */
.sprite-flip {
  transform: scaleX(-1);
  transform-origin: center;
}

/* Generic X-only sprite animation */
@keyframes play-sprite-x {
  from {
    background-position-x: 0%;
  }

  to {
    background-position-x: 99.999%;
  }
}

/* --- COWBOY (7 frames) --- */
.animate-cowboy-idle {
  background-image: url("/cowboy_idle_sheet.png");
  background-size: 700% 100%;

  animation-name: play-sprite-x;
  animation-duration: 3.2s;
  /* slower breathing */
  animation-timing-function: steps(6, end);
  /* 7 frames => 6 steps */
  animation-iteration-count: infinite;
  animation-fill-mode: both;
}

/* --- COWBOY ATTACK (6 frames) --- */
.animate-cowboy-attack {
  background-image: url("/cowboy_attack_sheet.png");
  background-size: 600% 100%;

  animation-name: play-sprite-x;
  animation-duration: 2.6s;
  animation-timing-function: steps(5, end);
  /* 6 frames => 5 steps */
  animation-iteration-count: 1;
  animation-fill-mode: forwards;
}

/* --- WOLF (7 frames) --- */
.animate-wolf-idle {
  background-image: url("/wolf_idle_sheet.png");
  background-size: 700% 100%;

  animation-name: play-sprite-x;
  animation-duration: 3.2s;
  /* slower breathing */
  animation-timing-function: steps(6, end);
  animation-iteration-count: infinite;
  animation-fill-mode: both;
}

/* --- WOLF HURT (4 frames) --- */
.animate-wolf-hurt {
  background-image: url("/wolf_hurt_sheet.png");
  background-size: 400% 100%;

  animation-name: play-sprite-x;
  animation-duration: 1.6s;
  animation-timing-function: steps(3, end);
  /* 4 frames => 3 steps */
  animation-iteration-count: 1;
  animation-fill-mode: forwards;

  filter: brightness(1.5) sepia(1) hue-rotate(-50deg) saturate(5);
}