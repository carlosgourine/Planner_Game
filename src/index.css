@import "tailwindcss";

@layer base {
  body {
    font-family: 'Press Start 2P', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
  }
}

@layer utilities {
  .glass-panel {
    @apply bg-black/40 backdrop-blur-md border border-white/10 shadow-xl;
  }

  .text-shadow {
    text-shadow: 2px 2px 0px rgba(0, 0, 0, 0.8);
  }

  .text-shadow-lg {
    text-shadow: 4px 4px 0px rgba(0, 0, 0, 1);
  }

  .bg-urban-tundra {
    background: linear-gradient(180deg, #020617 0%, #1e1b4b 40%, #172554 100%);
    position: relative;
  }

  /* Cyberpunk Grid Floor */
  .bg-grid-floor {
    background-image:
      linear-gradient(to right, rgba(0, 255, 255, 0.1) 1px, transparent 1px),
      linear-gradient(to bottom, rgba(0, 255, 255, 0.1) 1px, transparent 1px);
    background-size: 40px 40px;
    transform: perspective(500px) rotateX(60deg);
    transform-origin: bottom;
  }
}

/* Animations */

/* --- SNAPPY IMPACT SHAKE --- */
@keyframes shake-impact {
  0% {
    transform: translate(0, 0);
  }

  10% {
    transform: translate(-4px, -2px);
  }

  20% {
    transform: translate(4px, 2px);
  }

  30% {
    transform: translate(-4px, 2px);
  }

  40% {
    transform: translate(4px, -2px);
  }

  50% {
    transform: translate(-4px, -2px);
  }

  60% {
    transform: translate(4px, 2px);
  }

  70% {
    transform: translate(-4px, 2px);
  }

  80% {
    transform: translate(4px, -2px);
  }

  90% {
    transform: translate(-2px, -1px);
  }

  100% {
    transform: translate(0, 0);
  }
}

.animate-shake {
  animation: shake-impact 0.2s ease-in-out;
}

@keyframes glitch {
  0% {
    transform: translate(0);
  }

  20% {
    transform: translate(-2px, 2px);
  }

  40% {
    transform: translate(-2px, -2px);
  }

  60% {
    transform: translate(2px, 2px);
  }

  80% {
    transform: translate(2px, -2px);
  }

  100% {
    transform: translate(0);
  }
}

/* =========================================
   PIXEL ART SNAP ENGINE
   ========================================= */

/* Base sprite box */
.pixel-avatar {
  background-repeat: no-repeat;
  background-position: 0% 0%;
  image-rendering: pixelated;
  image-rendering: crisp-edges;
}

/* Avoid edge flicker on some sheets */
@keyframes play-sprite {
  from {
    background-position: 0% 0;
  }

  to {
    background-position: 99.999% 0;
  }
}

/* Idle bob (arcade breathing feel) */
@keyframes idle-bob {
  0% {
    transform: translateY(0);
  }

  50% {
    transform: translateY(-2px);
  }

  100% {
    transform: translateY(0);
  }
}

.animate-idle-bob {
  animation: idle-bob 1.1s ease-in-out infinite;
  will-change: transform;
}

/* Lunge forward + return */
@keyframes lunge-forward {
  0% {
    transform: translateX(0);
  }

  45% {
    transform: translateX(var(--lunge, 120px));
  }

  100% {
    transform: translateX(0);
  }
}

.animate-lunge {
  animation: lunge-forward 0.35s ease-out;
  will-change: transform;
}

/* Wolf recoil */
@keyframes recoil-back {
  0% {
    transform: translateX(0);
  }

  40% {
    transform: translateX(var(--recoil, 20px));
  }

  100% {
    transform: translateX(0);
  }
}

.animate-recoil {
  animation: recoil-back 0.22s ease-out;
  will-change: transform;
}

/* --- COWBOY (8 frames) --- */
.animate-cowboy-idle {
  background-image: url('/cowboybreathing.png');
  background-size: 800% 100%;
  animation: play-sprite 0.9s steps(7) infinite;
}

.animate-cowboy-attack {
  background-image: url('/cowboyfightreal.png');
  background-size: 800% 100%;
  animation: play-sprite 0.45s steps(7) forwards;
}

/* --- WOLF (8 frames) --- */
.animate-wolf-idle {
  background-image: url('/wolfbreathing.png');
  background-size: 800% 100%;
  animation: play-sprite 0.9s steps(7) infinite;
}

@keyframes wolf-hurt-skip {
  /* 8 columns => positions:
     0%, 14.2857%, 28.5714%, 42.8571%, 57.1429%, 71.4286%, 85.7143%, 100% */

  0% {
    background-position: 14.2857% 0;
  }

  /* col 1 */
  33% {
    background-position: 28.5714% 0;
  }

  /* col 2 */
  66% {
    background-position: 42.8571% 0;
  }

  /* col 3 */
  100% {
    background-position: 71.4286% 0;
  }

  /* col 5 (crouch) */
}

.animate-wolf-hurt {
  background-image: url('/wolfhurt.png');
  background-size: 800% 100%;
  animation: wolf-hurt-skip 0.35s steps(1, end) forwards;
  filter: brightness(1.5) sepia(1) hue-rotate(-50deg) saturate(5);
}